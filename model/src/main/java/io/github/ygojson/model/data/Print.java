package io.github.ygojson.model.data;

import java.util.Objects;
import java.util.UUID;

import com.fasterxml.jackson.annotation.*;
import jakarta.validation.constraints.Pattern;

import io.github.ygojson.model.data.definition.localization.Language;
import io.github.ygojson.model.data.property.IdProperties;
import io.github.ygojson.model.data.property.LanguageProperties;
import io.github.ygojson.model.data.property.PrintProperties;

/**
 * Model describing the properties of a Print (atomic).
 */
@JsonClassDescription(
	"""
		Describes the information for a print.

		This model contains the properties of the printed card that will not be common to all of them."""
)
@JsonPropertyOrder(
	{
		IdProperties.SELF_ID,
		IdProperties.CARD_ID,
		IdProperties.SET_ID,
		PrintProperties.PRINT_CODE,
		PrintProperties.FIRST_SERIES_SET,
		PrintProperties.RARITY,
		LanguageProperties.LANGUAGE,
	}
)
public class Print {

	private UUID id;
	private UUID cardId;
	private UUID setId;
	private String printCode;
	private String firstSeriesSet;
	private String rarity;
	private Language language;

	/**
	 * UUID (v5) for the Print (atomic) generated by YGOJSON.
	 */
	@JsonPropertyDescription(
		"UID (v5) for the Print (atomic) generated by YGOJSON."
	)
	@JsonProperty(value = IdProperties.SELF_ID, required = true)
	@JsonInclude(JsonInclude.Include.ALWAYS)
	public UUID getId() {
		return id;
	}

	/**
	 * UUID (v5) generated by YGOJSON of the card that is associated to this print.
	 * </br>
	 * This associates the print with the {@link Card}.
	 *
	 * @see Card#getId()
	 */
	@JsonPropertyDescription(
		"UID (v5) for the Card (atomic) associated with this print (generated by YGOJSON)."
	)
	@JsonProperty(value = IdProperties.CARD_ID, required = true)
	@JsonInclude(JsonInclude.Include.ALWAYS)
	public UUID getCardId() {
		return cardId;
	}

	/**
	 * UUID (v5) generated by YGOJSON of the set that is associated to this print.
	 * </br>
	 * This associates the print with the {@link Set}.
	 *
	 * @see Set#getId()
	 */
	@JsonPropertyDescription(
		"UID (v5) for the Set (atomic) associated with this print (generated by YGOJSON)."
	)
	@JsonProperty(value = IdProperties.SET_ID, required = true)
	@JsonInclude(JsonInclude.Include.ALWAYS)
	public UUID getSetId() {
		return setId;
	}

	/**
	 * Code identifying the specific print of a card.
	 * <br>
	 * This is composed by the set-code, the region-code and the print-number.
	 */
	@JsonPropertyDescription(
		"""
			Code identifying the specific print of a card.

			This code is composed by the set-code, region-code and set-number.

			Note that this is not present in Series 1 prints."""
	)
	@JsonProperty(value = PrintProperties.PRINT_CODE)
	@JsonInclude(JsonInclude.Include.NON_EMPTY)
	@Pattern(regexp = "[a-zA-Z0-9]+-[a-zA-Z0-9]+")
	public String getPrintCode() {
		return printCode;
	}

	/**
	 * Set for prints on the Series 1 sets (where the full print number was not present).
	 */
	@JsonPropertyDescription(
		"""
			Name of the Series 1 set for prints on them.

			Note that this is only present on prints belonging to the Series 1 sets, as a printCode is not present there."""
	)
	@JsonProperty(value = PrintProperties.FIRST_SERIES_SET)
	@JsonInclude(JsonInclude.Include.NON_EMPTY)
	public String getFirstSeriesSet() {
		return firstSeriesSet;
	}

	/**
	 * Rarity of the print (lower-case).
	 * </br>
	 * The rarity of the card print.
	 */
	@JsonPropertyDescription("Rarity of the print")
	@JsonProperty(value = PrintProperties.RARITY)
	@JsonInclude(JsonInclude.Include.NON_EMPTY)
	@Pattern(regexp = "[a-z]+")
	public String getRarity() {
		return rarity;
	}

	/**
	 * Language of the print.
	 * </br>
	 * The language of the card print.
	 */
	@JsonPropertyDescription("Language of the print")
	@JsonProperty(value = LanguageProperties.LANGUAGE)
	@JsonInclude(JsonInclude.Include.NON_EMPTY)
	public Language getLanguage() {
		return language;
	}

	public void setId(UUID id) {
		this.id = id;
	}

	public void setCardId(UUID cardId) {
		this.cardId = cardId;
	}

	public void setSetId(UUID setId) {
		this.setId = setId;
	}

	public void setPrintCode(String printCode) {
		this.printCode = printCode;
	}

	public void setFirstSeriesSet(String firstSeriesSet) {
		this.firstSeriesSet = firstSeriesSet;
	}

	public void setRarity(String rarity) {
		this.rarity = rarity;
	}

	public void setLanguage(Language language) {
		this.language = language;
	}

	@Override
	public boolean equals(Object o) {
		if (this == o) return true;
		if (!(o instanceof Print print)) return false;
		return (
			Objects.equals(id, print.id) &&
			Objects.equals(cardId, print.cardId) &&
			Objects.equals(setId, print.setId) &&
			Objects.equals(printCode, print.printCode) &&
			Objects.equals(firstSeriesSet, print.firstSeriesSet) &&
			Objects.equals(rarity, print.rarity) &&
			language == print.language
		);
	}

	@Override
	public int hashCode() {
		return Objects.hash(
			id,
			cardId,
			setId,
			printCode,
			firstSeriesSet,
			rarity,
			language
		);
	}
}
